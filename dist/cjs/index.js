"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}("#magnifier{\n    image-rendering: auto;\n    width: 100%;\n    height: 100%;\n}");const i=(e,t)=>{const n={zoom:!1,box:{x:0,y:0,w:e.clientWidth/2,h:e.clientHeight/2},imageSrc:""},i=()=>{e&&t&&(t.clearRect(0,0,e.clientWidth,e.clientHeight),(()=>{const{box:i,imageSrc:a,zoom:o}=n;if(""!==a){const n=new Image;if(n.src=a,o){let a=i.x<i.w/2?0:i.x-i.w/2;i.x>e.clientWidth-i.w/2&&(a=e.clientWidth-i.w);let o=i.y<i.h/2?0:i.y-i.h/2;i.y>e.clientWidth-i.h/2&&(o=e.clientWidth-i.h);const r=Math.round(100*a/e.clientWidth),c=n.naturalWidth*r/100,l=Math.round(100*o/e.clientHeight),h=n.naturalHeight*l/100;t.drawImage(n,c,h,n.naturalWidth/2,n.naturalHeight/2,0,0,e.clientWidth,e.clientHeight)}else{var r=Math.min(e.clientWidth/n.naturalWidth,e.clientHeight/n.naturalHeight),c=e.clientWidth/2-n.naturalWidth/2*r,l=e.clientHeight/2-n.naturalHeight/2*r;t.drawImage(n,c,l,n.naturalWidth*r,n.naturalHeight*r)}}})(),requestAnimationFrame(i))};return{startZoom:()=>{t.clearRect(0,0,e.clientWidth,e.clientHeight),i()},moveBox:(e,t)=>{n.box=Object.assign(Object.assign({},n.box),{x:e,y:t})},setImage:e=>{n.imageSrc=e},activeZoom:()=>{n.zoom=!0},disableZoom:()=>{n.zoom=!1}}};exports.ReactMagnifier=({image:t,height:a,width:o,breakpoints:r})=>{const c=e.useRef(null),[l,h]=e.useState(null),[u,d]=e.useState(o),[s,m]=e.useState(a),g=e.useCallback((e=>{if(null!==c&&c.current){const t=c.current.getBoundingClientRect();return{x:Math.round(e.clientX-t.left),y:Math.round(e.clientY-t.top)}}return{x:0,y:0}}),[]);return e.useEffect((()=>{if(null!==c&&c.current){const e=c.current.getContext("2d");if(e){const n=i(c.current,e);n.setImage(t),n.startZoom(),h(n)}}}),[t]),e.useEffect((()=>{if(r){const e=[];for(const n in r)e.push(window.matchMedia(`(max-width: ${n}px)`));function t(e){if(e.matches){for(const t in r)if(e.media.includes(`${t}px`)){const{height:e,width:n}=r[Number(t)];d(n),m(e)}}else d(o),m(a)}return t(e[0]),e.forEach((e=>e.addEventListener("change",t))),()=>{e.forEach((e=>e.removeEventListener("change",t)))}}}),[]),n.default.createElement("canvas",{id:"magnifier",ref:c,width:u,height:s,onMouseMove:e=>{const{x:t,y:n}=g(e);null==l||l.moveBox(t,n)},onMouseEnter:()=>null==l?void 0:l.activeZoom(),onMouseLeave:()=>null==l?void 0:l.disableZoom()})};
//# sourceMappingURL=index.js.map

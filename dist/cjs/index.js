"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react");function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t);!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}("#magnifier{\n    image-rendering: auto;\n    width: 100%;\n    height: 100%;\n}");const i=(t,e)=>{const n={zoom:!1,box:{x:0,y:0,w:t.clientWidth/2,h:t.clientHeight/2},imageSrc:""},i=()=>{t&&e&&(e.clearRect(0,0,t.clientWidth,t.clientHeight),(()=>{const{box:i,imageSrc:a,zoom:r}=n;if(""!==a){const n=new Image;if(n.src=a,r){var o=Math.min(t.clientWidth/n.naturalWidth,t.clientHeight/n.naturalHeight);let a=i.x<i.w/2?0:i.x-i.w/2;i.x>t.clientWidth-i.w/2&&(a=t.clientWidth-i.w);let r=i.y<i.h/2?0:i.y-i.h/2;i.y>t.clientWidth-i.h/2&&(r=t.clientWidth-i.h);const l=Math.round(100*a/t.clientWidth),u=n.naturalWidth*l/100,d=Math.round(100*r/t.clientHeight),s=n.naturalHeight*d/100;var c=t.clientWidth/2-n.naturalWidth/2*o,h=t.clientHeight/2-n.naturalHeight/2*o;e.drawImage(n,u,s,n.naturalWidth/2,n.naturalHeight/2,c,h,n.naturalWidth*o,n.naturalHeight*o)}else{o=Math.min(t.clientWidth/n.naturalWidth,t.clientHeight/n.naturalHeight);var l=t.clientWidth/2-n.naturalWidth/2*o,u=t.clientHeight/2-n.naturalHeight/2*o;e.drawImage(n,l,u,n.naturalWidth*o,n.naturalHeight*o)}}})(),requestAnimationFrame(i))};return{startZoom:()=>{e.clearRect(0,0,t.clientWidth,t.clientHeight),i()},moveBox:(t,e)=>{n.box={...n.box,x:t,y:e}},setImage:t=>{n.imageSrc=t},activeZoom:()=>{n.zoom=!0},disableZoom:()=>{n.zoom=!1}}};exports.ReactMagnifier=({image:e,height:a,width:r,breakpoints:o})=>{const c=t.useRef(null),[h,l]=t.useState(null),[u,d]=t.useState(r),[s,m]=t.useState(a),g=t.useCallback((t=>{if(null!==c&&c.current){const e=c.current.getBoundingClientRect();return{x:Math.round(t.clientX-e.left),y:Math.round(t.clientY-e.top)}}return{x:0,y:0}}),[]);return t.useEffect((()=>{if(null!==c&&c.current){const t=c.current.getContext("2d");if(t){const n=i(c.current,t);n.setImage(e),n.startZoom(),l(n)}}}),[e]),t.useEffect((()=>{if(o){const t=[];for(const n in o)t.push(window.matchMedia(`(max-width: ${n}px)`));function e(t){if(t.matches){for(const e in o)if(t.media.includes(`${e}px`)){const{height:t,width:n}=o[Number(e)];d(n),m(t)}}else d(r),m(a)}return e(t[0]),t.forEach((t=>t.addEventListener("change",e))),()=>{t.forEach((t=>t.removeEventListener("change",e)))}}}),[]),n.default.createElement("canvas",{id:"magnifier",ref:c,width:u,height:s,onMouseMove:t=>{const{x:e,y:n}=g(t);h?.moveBox(e,n)},onMouseEnter:()=>h?.activeZoom(),onMouseLeave:()=>h?.disableZoom()})};
//# sourceMappingURL=index.js.map
